# test with `lefthook run <hook-name>` e.g. `lefthook run pre-commit`

pre-commit:
  parallel: true
  commands:
    format:
      glob: "*.clj"
      files: git diff --name-only --cached
      run: clojure -Sdeps '{:deps {cljfmt {:mvn/version "0.9.2"}}}' -M -m cljfmt.main fix {staged_files} && git add {staged_files}
    test:
      glob: "*.clj"
      files: git diff --name-only --cached
      run: bin/kaocha --fail-fast

commit-msg:
  commands:
    commitlint:
      run: npx --yes commitlint --edit
